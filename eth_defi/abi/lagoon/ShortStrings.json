{"abi":[{"type":"error","name":"InvalidShortString","inputs":[]},{"type":"error","name":"StringTooLong","inputs":[{"name":"str","type":"string","internalType":"string"}]}],"bytecode":{"object":"0x60556032600b8282823980515f1a607314602657634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea2646970667358221220a0e36284e034f6f96f19b0b20c6d09b175a4420ec739ac42e13a5d9e797e9cd664736f6c634300081a0033","sourceMap":"1255:3053:56:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;1255:3053:56;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040525f80fdfea2646970667358221220a0e36284e034f6f96f19b0b20c6d09b175a4420ec739ac42e13a5d9e797e9cd664736f6c634300081a0033","sourceMap":"1255:3053:56:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"InvalidShortString\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"str\",\"type\":\"string\"}],\"name\":\"StringTooLong\",\"type\":\"error\"}],\"devdoc\":{\"details\":\"This library provides functions to convert short memory strings into a `ShortString` type that can be used as an immutable variable. Strings of arbitrary length can be optimized using this library if they are short enough (up to 31 bytes) by packing them with their length (1 byte) in a single EVM word (32 bytes). Additionally, a fallback mechanism can be used for every other case. Usage example: ```solidity contract Named {     using ShortStrings for *;     ShortString private immutable _name;     string private _nameFallback;     constructor(string memory contractName) {         _name = contractName.toShortStringWithFallback(_nameFallback);     }     function name() external view returns (string memory) {         return _name.toStringWithFallback(_nameFallback);     } } ```\",\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol\":\"ShortStrings\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":@src/=src/\",\":ds-test/=lib/openzeppelin-contracts-upgradeable/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol\":{\"keccak256\":\"0x18a7171df639a934592915a520ecb97c5bbc9675a1105607aac8a94e72bf62c6\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7478e1f13da69a2867ccd883001d836b75620362e743f196376d63ed0c422a1c\",\"dweb:/ipfs/QmWywcQ9TNfwtoqAxbn25d8C5VrV12PrPS9UjtGe6pL2BA\"]},\"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol\":{\"keccak256\":\"0x32ba59b4b7299237c8ba56319110989d7978a039faf754793064e967e5894418\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1ae50c8b562427df610cc4540c9bf104acca7ef8e2dcae567ae7e52272281e9c\",\"dweb:/ipfs/QmTHiadFCSJUPpRjNegc5SahmeU8bAoY8i9Aq6tVscbcKR\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.26+commit.8a97fa7a"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"InvalidShortString"},{"inputs":[{"internalType":"string","name":"str","type":"string"}],"type":"error","name":"StringTooLong"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","@src/=src/","ds-test/=lib/openzeppelin-contracts-upgradeable/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol":"ShortStrings"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol":{"keccak256":"0x18a7171df639a934592915a520ecb97c5bbc9675a1105607aac8a94e72bf62c6","urls":["bzz-raw://7478e1f13da69a2867ccd883001d836b75620362e743f196376d63ed0c422a1c","dweb:/ipfs/QmWywcQ9TNfwtoqAxbn25d8C5VrV12PrPS9UjtGe6pL2BA"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol":{"keccak256":"0x32ba59b4b7299237c8ba56319110989d7978a039faf754793064e967e5894418","urls":["bzz-raw://1ae50c8b562427df610cc4540c9bf104acca7ef8e2dcae567ae7e52272281e9c","dweb:/ipfs/QmTHiadFCSJUPpRjNegc5SahmeU8bAoY8i9Aq6tVscbcKR"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[],"types":{}},"ast":{"absolutePath":"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol","id":52031,"exportedSymbols":{"ShortString":[51819],"ShortStrings":[52030],"StorageSlot":[52140]},"nodeType":"SourceUnit","src":"106:4203:56","nodes":[{"id":51815,"nodeType":"PragmaDirective","src":"106:24:56","nodes":[],"literals":["solidity","^","0.8",".20"]},{"id":51817,"nodeType":"ImportDirective","src":"132:46:56","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol","file":"./StorageSlot.sol","nameLocation":"-1:-1:-1","scope":52031,"sourceUnit":52141,"symbolAliases":[{"foreign":{"id":51816,"name":"StorageSlot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52140,"src":"140:11:56","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":51819,"nodeType":"UserDefinedValueTypeDefinition","src":"348:28:56","nodes":[],"canonicalName":"ShortString","name":"ShortString","nameLocation":"353:11:56","underlyingType":{"id":51818,"name":"bytes32","nodeType":"ElementaryTypeName","src":"368:7:56","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":52030,"nodeType":"ContractDefinition","src":"1255:3053:56","nodes":[{"id":51823,"nodeType":"VariableDeclaration","src":"1345:111:56","nodes":[],"constant":true,"mutability":"constant","name":"FALLBACK_SENTINEL","nameLocation":"1370:17:56","scope":52030,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":51821,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1345:7:56","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"hexValue":"307830303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030304646","id":51822,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1390:66:56","typeDescriptions":{"typeIdentifier":"t_rational_255_by_1","typeString":"int_const 255"},"value":"0x00000000000000000000000000000000000000000000000000000000000000FF"},"visibility":"private"},{"id":51827,"nodeType":"ErrorDefinition","src":"1463:32:56","nodes":[],"errorSelector":"305a27a9","name":"StringTooLong","nameLocation":"1469:13:56","parameters":{"id":51826,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51825,"mutability":"mutable","name":"str","nameLocation":"1490:3:56","nodeType":"VariableDeclaration","scope":51827,"src":"1483:10:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":51824,"name":"string","nodeType":"ElementaryTypeName","src":"1483:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1482:12:56"}},{"id":51829,"nodeType":"ErrorDefinition","src":"1500:27:56","nodes":[],"errorSelector":"b3512b0c","name":"InvalidShortString","nameLocation":"1506:18:56","parameters":{"id":51828,"nodeType":"ParameterList","parameters":[],"src":"1524:2:56"}},{"id":51873,"nodeType":"FunctionDefinition","src":"1708:286:56","nodes":[],"body":{"id":51872,"nodeType":"Block","src":"1786:208:56","nodes":[],"statements":[{"assignments":[51839],"declarations":[{"constant":false,"id":51839,"mutability":"mutable","name":"bstr","nameLocation":"1809:4:56","nodeType":"VariableDeclaration","scope":51872,"src":"1796:17:56","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":51838,"name":"bytes","nodeType":"ElementaryTypeName","src":"1796:5:56","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"id":51844,"initialValue":{"arguments":[{"id":51842,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51832,"src":"1822:3:56","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":51841,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1816:5:56","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":51840,"name":"bytes","nodeType":"ElementaryTypeName","src":"1816:5:56","typeDescriptions":{}}},"id":51843,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1816:10:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"nodeType":"VariableDeclarationStatement","src":"1796:30:56"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51848,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":51845,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51839,"src":"1840:4:56","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":51846,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1845:6:56","memberName":"length","nodeType":"MemberAccess","src":"1840:11:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3331","id":51847,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1854:2:56","typeDescriptions":{"typeIdentifier":"t_rational_31_by_1","typeString":"int_const 31"},"value":"31"},"src":"1840:16:56","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51854,"nodeType":"IfStatement","src":"1836:72:56","trueBody":{"id":51853,"nodeType":"Block","src":"1858:50:56","statements":[{"errorCall":{"arguments":[{"id":51850,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51832,"src":"1893:3:56","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":51849,"name":"StringTooLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51827,"src":"1879:13:56","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_string_memory_ptr_$returns$_t_error_$","typeString":"function (string memory) pure returns (error)"}},"id":51851,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1879:18:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":51852,"nodeType":"RevertStatement","src":"1872:25:56"}]}},{"expression":{"arguments":[{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51868,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":51863,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51839,"src":"1965:4:56","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":51862,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1957:7:56","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":51861,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1957:7:56","typeDescriptions":{}}},"id":51864,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1957:13:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":51860,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1949:7:56","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":51859,"name":"uint256","nodeType":"ElementaryTypeName","src":"1949:7:56","typeDescriptions":{}}},"id":51865,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1949:22:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"|","rightExpression":{"expression":{"id":51866,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51839,"src":"1974:4:56","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":51867,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1979:6:56","memberName":"length","nodeType":"MemberAccess","src":"1974:11:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1949:36:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":51858,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1941:7:56","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":51857,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1941:7:56","typeDescriptions":{}}},"id":51869,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1941:45:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":51855,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51819,"src":"1924:11:56","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"type(ShortString)"}},"id":51856,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1936:4:56","memberName":"wrap","nodeType":"MemberAccess","src":"1924:16:56","typeDescriptions":{"typeIdentifier":"t_function_wrap_pure$_t_bytes32_$returns$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"function (bytes32) pure returns (ShortString)"}},"id":51870,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1924:63:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"functionReturnParameters":51837,"id":51871,"nodeType":"Return","src":"1917:70:56"}]},"documentation":{"id":51830,"nodeType":"StructuredDocumentation","src":"1533:170:56","text":" @dev Encode a string of at most 31 chars into a `ShortString`.\n This will trigger a `StringTooLong` error is the input string is too long."},"implemented":true,"kind":"function","modifiers":[],"name":"toShortString","nameLocation":"1717:13:56","parameters":{"id":51833,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51832,"mutability":"mutable","name":"str","nameLocation":"1745:3:56","nodeType":"VariableDeclaration","scope":51873,"src":"1731:17:56","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":51831,"name":"string","nodeType":"ElementaryTypeName","src":"1731:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1730:19:56"},"returnParameters":{"id":51837,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51836,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51873,"src":"1773:11:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"},"typeName":{"id":51835,"nodeType":"UserDefinedTypeName","pathNode":{"id":51834,"name":"ShortString","nameLocations":["1773:11:56"],"nodeType":"IdentifierPath","referencedDeclaration":51819,"src":"1773:11:56"},"referencedDeclaration":51819,"src":"1773:11:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"visibility":"internal"}],"src":"1772:13:56"},"scope":52030,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":51899,"nodeType":"FunctionDefinition","src":"2078:405:56","nodes":[],"body":{"id":51898,"nodeType":"Block","src":"2152:331:56","nodes":[],"statements":[{"assignments":[51883],"declarations":[{"constant":false,"id":51883,"mutability":"mutable","name":"len","nameLocation":"2170:3:56","nodeType":"VariableDeclaration","scope":51898,"src":"2162:11:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51882,"name":"uint256","nodeType":"ElementaryTypeName","src":"2162:7:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51887,"initialValue":{"arguments":[{"id":51885,"name":"sstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51877,"src":"2187:4:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}],"id":51884,"name":"byteLength","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51931,"src":"2176:10:56","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$51819_$returns$_t_uint256_$","typeString":"function (ShortString) pure returns (uint256)"}},"id":51886,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2176:16:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2162:30:56"},{"assignments":[51889],"declarations":[{"constant":false,"id":51889,"mutability":"mutable","name":"str","nameLocation":"2294:3:56","nodeType":"VariableDeclaration","scope":51898,"src":"2280:17:56","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":51888,"name":"string","nodeType":"ElementaryTypeName","src":"2280:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"id":51894,"initialValue":{"arguments":[{"hexValue":"3332","id":51892,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2311:2:56","typeDescriptions":{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"},"value":"32"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"}],"id":51891,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"NewExpression","src":"2300:10:56","typeDescriptions":{"typeIdentifier":"t_function_objectcreation_pure$_t_uint256_$returns$_t_string_memory_ptr_$","typeString":"function (uint256) pure returns (string memory)"},"typeName":{"id":51890,"name":"string","nodeType":"ElementaryTypeName","src":"2304:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}}},"id":51893,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2300:14:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"nodeType":"VariableDeclarationStatement","src":"2280:34:56"},{"AST":{"nativeSrc":"2376:81:56","nodeType":"YulBlock","src":"2376:81:56","statements":[{"expression":{"arguments":[{"name":"str","nativeSrc":"2397:3:56","nodeType":"YulIdentifier","src":"2397:3:56"},{"name":"len","nativeSrc":"2402:3:56","nodeType":"YulIdentifier","src":"2402:3:56"}],"functionName":{"name":"mstore","nativeSrc":"2390:6:56","nodeType":"YulIdentifier","src":"2390:6:56"},"nativeSrc":"2390:16:56","nodeType":"YulFunctionCall","src":"2390:16:56"},"nativeSrc":"2390:16:56","nodeType":"YulExpressionStatement","src":"2390:16:56"},{"expression":{"arguments":[{"arguments":[{"name":"str","nativeSrc":"2430:3:56","nodeType":"YulIdentifier","src":"2430:3:56"},{"kind":"number","nativeSrc":"2435:4:56","nodeType":"YulLiteral","src":"2435:4:56","type":"","value":"0x20"}],"functionName":{"name":"add","nativeSrc":"2426:3:56","nodeType":"YulIdentifier","src":"2426:3:56"},"nativeSrc":"2426:14:56","nodeType":"YulFunctionCall","src":"2426:14:56"},{"name":"sstr","nativeSrc":"2442:4:56","nodeType":"YulIdentifier","src":"2442:4:56"}],"functionName":{"name":"mstore","nativeSrc":"2419:6:56","nodeType":"YulIdentifier","src":"2419:6:56"},"nativeSrc":"2419:28:56","nodeType":"YulFunctionCall","src":"2419:28:56"},"nativeSrc":"2419:28:56","nodeType":"YulExpressionStatement","src":"2419:28:56"}]},"documentation":"@solidity memory-safe-assembly","evmVersion":"cancun","externalReferences":[{"declaration":51883,"isOffset":false,"isSlot":false,"src":"2402:3:56","valueSize":1},{"declaration":51877,"isOffset":false,"isSlot":false,"src":"2442:4:56","valueSize":1},{"declaration":51889,"isOffset":false,"isSlot":false,"src":"2397:3:56","valueSize":1},{"declaration":51889,"isOffset":false,"isSlot":false,"src":"2430:3:56","valueSize":1}],"id":51895,"nodeType":"InlineAssembly","src":"2367:90:56"},{"expression":{"id":51896,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51889,"src":"2473:3:56","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"functionReturnParameters":51881,"id":51897,"nodeType":"Return","src":"2466:10:56"}]},"documentation":{"id":51874,"nodeType":"StructuredDocumentation","src":"2000:73:56","text":" @dev Decode a `ShortString` back to a \"normal\" string."},"implemented":true,"kind":"function","modifiers":[],"name":"toString","nameLocation":"2087:8:56","parameters":{"id":51878,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51877,"mutability":"mutable","name":"sstr","nameLocation":"2108:4:56","nodeType":"VariableDeclaration","scope":51899,"src":"2096:16:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"},"typeName":{"id":51876,"nodeType":"UserDefinedTypeName","pathNode":{"id":51875,"name":"ShortString","nameLocations":["2096:11:56"],"nodeType":"IdentifierPath","referencedDeclaration":51819,"src":"2096:11:56"},"referencedDeclaration":51819,"src":"2096:11:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"visibility":"internal"}],"src":"2095:18:56"},"returnParameters":{"id":51881,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51880,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51899,"src":"2137:13:56","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":51879,"name":"string","nodeType":"ElementaryTypeName","src":"2137:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2136:15:56"},"scope":52030,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":51931,"nodeType":"FunctionDefinition","src":"2555:245:56","nodes":[],"body":{"id":51930,"nodeType":"Block","src":"2625:175:56","nodes":[],"statements":[{"assignments":[51909],"declarations":[{"constant":false,"id":51909,"mutability":"mutable","name":"result","nameLocation":"2643:6:56","nodeType":"VariableDeclaration","scope":51930,"src":"2635:14:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51908,"name":"uint256","nodeType":"ElementaryTypeName","src":"2635:7:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":51919,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51918,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":51914,"name":"sstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51903,"src":"2679:4:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}],"expression":{"id":51912,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51819,"src":"2660:11:56","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"type(ShortString)"}},"id":51913,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2672:6:56","memberName":"unwrap","nodeType":"MemberAccess","src":"2660:18:56","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$51819_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":51915,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2660:24:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":51911,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2652:7:56","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":51910,"name":"uint256","nodeType":"ElementaryTypeName","src":"2652:7:56","typeDescriptions":{}}},"id":51916,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2652:33:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30784646","id":51917,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2688:4:56","typeDescriptions":{"typeIdentifier":"t_rational_255_by_1","typeString":"int_const 255"},"value":"0xFF"},"src":"2652:40:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2635:57:56"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51922,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":51920,"name":"result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51909,"src":"2706:6:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3331","id":51921,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2715:2:56","typeDescriptions":{"typeIdentifier":"t_rational_31_by_1","typeString":"int_const 31"},"value":"31"},"src":"2706:11:56","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":51927,"nodeType":"IfStatement","src":"2702:69:56","trueBody":{"id":51926,"nodeType":"Block","src":"2719:52:56","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":51923,"name":"InvalidShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51829,"src":"2740:18:56","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":51924,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2740:20:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":51925,"nodeType":"RevertStatement","src":"2733:27:56"}]}},{"expression":{"id":51928,"name":"result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51909,"src":"2787:6:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":51907,"id":51929,"nodeType":"Return","src":"2780:13:56"}]},"documentation":{"id":51900,"nodeType":"StructuredDocumentation","src":"2489:61:56","text":" @dev Return the length of a `ShortString`."},"implemented":true,"kind":"function","modifiers":[],"name":"byteLength","nameLocation":"2564:10:56","parameters":{"id":51904,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51903,"mutability":"mutable","name":"sstr","nameLocation":"2587:4:56","nodeType":"VariableDeclaration","scope":51931,"src":"2575:16:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"},"typeName":{"id":51902,"nodeType":"UserDefinedTypeName","pathNode":{"id":51901,"name":"ShortString","nameLocations":["2575:11:56"],"nodeType":"IdentifierPath","referencedDeclaration":51819,"src":"2575:11:56"},"referencedDeclaration":51819,"src":"2575:11:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"visibility":"internal"}],"src":"2574:18:56"},"returnParameters":{"id":51907,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51906,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51931,"src":"2616:7:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":51905,"name":"uint256","nodeType":"ElementaryTypeName","src":"2616:7:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2615:9:56"},"scope":52030,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":51971,"nodeType":"FunctionDefinition","src":"2914:340:56","nodes":[],"body":{"id":51970,"nodeType":"Block","src":"3023:231:56","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":51948,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":51944,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51934,"src":"3043:5:56","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":51943,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3037:5:56","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":51942,"name":"bytes","nodeType":"ElementaryTypeName","src":"3037:5:56","typeDescriptions":{}}},"id":51945,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3037:12:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":51946,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3050:6:56","memberName":"length","nodeType":"MemberAccess","src":"3037:19:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"hexValue":"3332","id":51947,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3059:2:56","typeDescriptions":{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"},"value":"32"},"src":"3037:24:56","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":51968,"nodeType":"Block","src":"3121:127:56","statements":[{"expression":{"id":51961,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"arguments":[{"id":51957,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51936,"src":"3161:5:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}],"expression":{"id":51954,"name":"StorageSlot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52140,"src":"3135:11:56","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_StorageSlot_$52140_$","typeString":"type(library StorageSlot)"}},"id":51956,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3147:13:56","memberName":"getStringSlot","nodeType":"MemberAccess","referencedDeclaration":52117,"src":"3135:25:56","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_string_storage_ptr_$returns$_t_struct$_StringSlot_$52048_storage_ptr_$","typeString":"function (string storage pointer) pure returns (struct StorageSlot.StringSlot storage pointer)"}},"id":51958,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3135:32:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_StringSlot_$52048_storage_ptr","typeString":"struct StorageSlot.StringSlot storage pointer"}},"id":51959,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"3168:5:56","memberName":"value","nodeType":"MemberAccess","referencedDeclaration":52047,"src":"3135:38:56","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":51960,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51934,"src":"3176:5:56","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"src":"3135:46:56","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string storage ref"}},"id":51962,"nodeType":"ExpressionStatement","src":"3135:46:56"},{"expression":{"arguments":[{"id":51965,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51823,"src":"3219:17:56","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":51963,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51819,"src":"3202:11:56","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"type(ShortString)"}},"id":51964,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3214:4:56","memberName":"wrap","nodeType":"MemberAccess","src":"3202:16:56","typeDescriptions":{"typeIdentifier":"t_function_wrap_pure$_t_bytes32_$returns$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"function (bytes32) pure returns (ShortString)"}},"id":51966,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3202:35:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"functionReturnParameters":51941,"id":51967,"nodeType":"Return","src":"3195:42:56"}]},"id":51969,"nodeType":"IfStatement","src":"3033:215:56","trueBody":{"id":51953,"nodeType":"Block","src":"3063:52:56","statements":[{"expression":{"arguments":[{"id":51950,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51934,"src":"3098:5:56","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":51949,"name":"toShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51873,"src":"3084:13:56","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_string_memory_ptr_$returns$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"function (string memory) pure returns (ShortString)"}},"id":51951,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3084:20:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"functionReturnParameters":51941,"id":51952,"nodeType":"Return","src":"3077:27:56"}]}}]},"documentation":{"id":51932,"nodeType":"StructuredDocumentation","src":"2806:103:56","text":" @dev Encode a string into a `ShortString`, or write it to storage if it is too long."},"implemented":true,"kind":"function","modifiers":[],"name":"toShortStringWithFallback","nameLocation":"2923:25:56","parameters":{"id":51937,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51934,"mutability":"mutable","name":"value","nameLocation":"2963:5:56","nodeType":"VariableDeclaration","scope":51971,"src":"2949:19:56","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":51933,"name":"string","nodeType":"ElementaryTypeName","src":"2949:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"},{"constant":false,"id":51936,"mutability":"mutable","name":"store","nameLocation":"2985:5:56","nodeType":"VariableDeclaration","scope":51971,"src":"2970:20:56","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":51935,"name":"string","nodeType":"ElementaryTypeName","src":"2970:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2948:43:56"},"returnParameters":{"id":51941,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51940,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51971,"src":"3010:11:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"},"typeName":{"id":51939,"nodeType":"UserDefinedTypeName","pathNode":{"id":51938,"name":"ShortString","nameLocations":["3010:11:56"],"nodeType":"IdentifierPath","referencedDeclaration":51819,"src":"3010:11:56"},"referencedDeclaration":51819,"src":"3010:11:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"visibility":"internal"}],"src":"3009:13:56"},"scope":52030,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":51998,"nodeType":"FunctionDefinition","src":"3385:267:56","nodes":[],"body":{"id":51997,"nodeType":"Block","src":"3494:158:56","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":51987,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":51984,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51975,"src":"3527:5:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}],"expression":{"id":51982,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51819,"src":"3508:11:56","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"type(ShortString)"}},"id":51983,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3520:6:56","memberName":"unwrap","nodeType":"MemberAccess","src":"3508:18:56","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$51819_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":51985,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3508:25:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":51986,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51823,"src":"3537:17:56","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3508:46:56","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":51995,"nodeType":"Block","src":"3609:37:56","statements":[{"expression":{"id":51993,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51977,"src":"3630:5:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}},"functionReturnParameters":51981,"id":51994,"nodeType":"Return","src":"3623:12:56"}]},"id":51996,"nodeType":"IfStatement","src":"3504:142:56","trueBody":{"id":51992,"nodeType":"Block","src":"3556:47:56","statements":[{"expression":{"arguments":[{"id":51989,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51975,"src":"3586:5:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}],"id":51988,"name":"toString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51899,"src":"3577:8:56","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$51819_$returns$_t_string_memory_ptr_$","typeString":"function (ShortString) pure returns (string memory)"}},"id":51990,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3577:15:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"functionReturnParameters":51981,"id":51991,"nodeType":"Return","src":"3570:22:56"}]}}]},"documentation":{"id":51972,"nodeType":"StructuredDocumentation","src":"3260:120:56","text":" @dev Decode a string that was encoded to `ShortString` or written to storage using {setWithFallback}."},"implemented":true,"kind":"function","modifiers":[],"name":"toStringWithFallback","nameLocation":"3394:20:56","parameters":{"id":51978,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51975,"mutability":"mutable","name":"value","nameLocation":"3427:5:56","nodeType":"VariableDeclaration","scope":51998,"src":"3415:17:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"},"typeName":{"id":51974,"nodeType":"UserDefinedTypeName","pathNode":{"id":51973,"name":"ShortString","nameLocations":["3415:11:56"],"nodeType":"IdentifierPath","referencedDeclaration":51819,"src":"3415:11:56"},"referencedDeclaration":51819,"src":"3415:11:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"visibility":"internal"},{"constant":false,"id":51977,"mutability":"mutable","name":"store","nameLocation":"3449:5:56","nodeType":"VariableDeclaration","scope":51998,"src":"3434:20:56","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":51976,"name":"string","nodeType":"ElementaryTypeName","src":"3434:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"3414:41:56"},"returnParameters":{"id":51981,"nodeType":"ParameterList","parameters":[{"constant":false,"id":51980,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":51998,"src":"3479:13:56","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":51979,"name":"string","nodeType":"ElementaryTypeName","src":"3479:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"3478:15:56"},"scope":52030,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":52029,"nodeType":"FunctionDefinition","src":"4027:279:56","nodes":[],"body":{"id":52028,"nodeType":"Block","src":"4132:174:56","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":52014,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":52011,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52002,"src":"4165:5:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}],"expression":{"id":52009,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51819,"src":"4146:11:56","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$51819_$","typeString":"type(ShortString)"}},"id":52010,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4158:6:56","memberName":"unwrap","nodeType":"MemberAccess","src":"4146:18:56","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$51819_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":52012,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4146:25:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":52013,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51823,"src":"4175:17:56","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"4146:46:56","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":52026,"nodeType":"Block","src":"4249:51:56","statements":[{"expression":{"expression":{"arguments":[{"id":52022,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52004,"src":"4276:5:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}],"id":52021,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4270:5:56","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":52020,"name":"bytes","nodeType":"ElementaryTypeName","src":"4270:5:56","typeDescriptions":{}}},"id":52023,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4270:12:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes storage pointer"}},"id":52024,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4283:6:56","memberName":"length","nodeType":"MemberAccess","src":"4270:19:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":52008,"id":52025,"nodeType":"Return","src":"4263:26:56"}]},"id":52027,"nodeType":"IfStatement","src":"4142:158:56","trueBody":{"id":52019,"nodeType":"Block","src":"4194:49:56","statements":[{"expression":{"arguments":[{"id":52016,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":52002,"src":"4226:5:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}],"id":52015,"name":"byteLength","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":51931,"src":"4215:10:56","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$51819_$returns$_t_uint256_$","typeString":"function (ShortString) pure returns (uint256)"}},"id":52017,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4215:17:56","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":52008,"id":52018,"nodeType":"Return","src":"4208:24:56"}]}}]},"documentation":{"id":51999,"nodeType":"StructuredDocumentation","src":"3658:364:56","text":" @dev Return the length of a string that was encoded to `ShortString` or written to storage using\n {setWithFallback}.\n WARNING: This will return the \"byte length\" of the string. This may not reflect the actual length in terms of\n actual characters as the UTF-8 encoding of a single character can span over multiple bytes."},"implemented":true,"kind":"function","modifiers":[],"name":"byteLengthWithFallback","nameLocation":"4036:22:56","parameters":{"id":52005,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52002,"mutability":"mutable","name":"value","nameLocation":"4071:5:56","nodeType":"VariableDeclaration","scope":52029,"src":"4059:17:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"},"typeName":{"id":52001,"nodeType":"UserDefinedTypeName","pathNode":{"id":52000,"name":"ShortString","nameLocations":["4059:11:56"],"nodeType":"IdentifierPath","referencedDeclaration":51819,"src":"4059:11:56"},"referencedDeclaration":51819,"src":"4059:11:56","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$51819","typeString":"ShortString"}},"visibility":"internal"},{"constant":false,"id":52004,"mutability":"mutable","name":"store","nameLocation":"4093:5:56","nodeType":"VariableDeclaration","scope":52029,"src":"4078:20:56","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":52003,"name":"string","nodeType":"ElementaryTypeName","src":"4078:6:56","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"4058:41:56"},"returnParameters":{"id":52008,"nodeType":"ParameterList","parameters":[{"constant":false,"id":52007,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":52029,"src":"4123:7:56","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":52006,"name":"uint256","nodeType":"ElementaryTypeName","src":"4123:7:56","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4122:9:56"},"scope":52030,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"ShortStrings","contractDependencies":[],"contractKind":"library","documentation":{"id":51820,"nodeType":"StructuredDocumentation","src":"378:876:56","text":" @dev This library provides functions to convert short memory strings\n into a `ShortString` type that can be used as an immutable variable.\n Strings of arbitrary length can be optimized using this library if\n they are short enough (up to 31 bytes) by packing them with their\n length (1 byte) in a single EVM word (32 bytes). Additionally, a\n fallback mechanism can be used for every other case.\n Usage example:\n ```solidity\n contract Named {\n     using ShortStrings for *;\n     ShortString private immutable _name;\n     string private _nameFallback;\n     constructor(string memory contractName) {\n         _name = contractName.toShortStringWithFallback(_nameFallback);\n     }\n     function name() external view returns (string memory) {\n         return _name.toStringWithFallback(_nameFallback);\n     }\n }\n ```"},"fullyImplemented":true,"linearizedBaseContracts":[52030],"name":"ShortStrings","nameLocation":"1263:12:56","scope":52031,"usedErrors":[51827,51829],"usedEvents":[]}],"license":"MIT"},"id":56}